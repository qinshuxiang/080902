# 计算机组成原理

## 概述

### 计算机发展历程

1. 第一代计算机采用**电子管**作为逻辑元件，**使用计算机语言编程**，使用穿孔卡片、纸带。
2. 第二代计算机采用**晶体管**替代电子管，**出现高级编程语言**，**有了操作系统雏形**。
3. 第三代计算机采用**中小规模集成电路**。
4. 第四代计算机采用**大规模和超大规模集成电路**，微处理器和微型计算机诞生。

**摩尔定律**指出集成电路上的晶体管数目**每隔两年左右增加一倍**。摩尔定律不仅应用于**处理器**，也适用于**存储器**的发展。摩尔定律推动了计算机硬件的快速发展，包括处理器和存储器的性能提升。

**冯诺伊曼计算机**：冯诺依曼结构计算机的硬件结构包括**输入设备、运算器、控制器、主存储器和输出设备**。数据和程序指令以二进制形式同等地存放在存储器中，指令由操作码和地址码组成，操作码指明操作类型，地址码指明操作数据的位置，计算机根据存储器中的指令序列一条一条地执行，实现程序的自动化执行。



### 计算机系统层次结构

#### 计算机系统的基本组成

计算机 = 硬件 + 软件，软件包含系统软件与应用软件。

> 系统软件包括：操作系统、数据库管理系统、标准程序库、网络软件、语言处理程序、服务程序



#### 计算机硬件的基本组成

**计算机组成原理就是在研究计算机硬件的底层协调和工作方式**。其中，**计算机硬件包括CPU、内存、外存、显卡等部件**，而操作系统和应用软件安装在计算机硬件之上，通过计算机网络实现计算机之间的信息互联互通。

**CPU**：中央处理器，完成对数据的处理，型号和性能决定数据处理速度。**一般由运算器和控制器组成**。有金属针脚，用于传递数据信息。**双核是指两个运算器，一个控制器**。

**内存**：大小影响多应用程序的流畅性。有金属针脚，用于传递数据信息。**CPU和内存之间的数据交换通过主板上的印刷电路板传输二进制信息。**

**外存**：容量决定手机或电脑中可存储的电影数量。有金属针脚，用于传递数据信息。

**显卡**：性能影响游戏图像处理。



#### 计算机的工作过程

计算机的工作过程就是执行指令的过程，指令由操作码和操作数组成，操作码指明本指令完成的操作，地址码指明本指令的操作对象。指令按照存储器的地址顺序连续的存放在存储器中。

为了纪录程序的执行过程，需要一个记录读取指令地址的寄存器，称为指令地址寄存器，或者程序计数器。指令的读取就可以根据程序计数器所指出的指令地址来决定读取的指令，由于指令通常按照地址增加的顺序存放，故此，每次读取一条指令之后，程序计数器加一就为读取下一条指令做好准备。



### 计算机的性能指标

吞吐量：单位时间内的数据输出数量。

响应时间：从事件开始到事件结束的时间，也称执行时间。

CPU时钟周期：机器主频的倒数

主频：CPU工作主时钟的频率

CPI：执行一条指令所需要的平均时钟周期

CPU 执行时间;MIPS、MFLOPS 、GFLOPS、TFLOPS、PFLOPS。



## 数据的表示和运算

### 数制与编码

#### 进位计数制及其相互转换

进位计数制是指按照进位制的方法表示数，不同的数制均涉及两个基本概念：基数和权。

基数：进位计数制中所拥有数字的个数。

权：每位数字的值等于数字乘以所在位数的相关常数，这个常数就是权。

**B表示二进制，O表示八进制，H表示十六进制。**

**二、八、十六进制转十进制**：

例如，八进制 $23$ 转换为十进制：
$$
2 \times 8^1 + 3 \times 8^0 = 16 + 3 = 19
$$
**十进制转二进制**：

例如，将十进制数 $13$ 转换为二进制：
$$
13 \div 2 = 6 \quad \text{余数} = 1 \\
6 \div 2 = 3 \quad \text{余数} = 0 \\
3 \div 2 = 1 \quad \text{余数} = 1 \\
1 \div 2 = 0 \quad \text{余数} = 1 \\
\text{结果（倒序）} = 1101
$$

**二进制与八进制**:

例如，二进制 $110110$ 转换为八进制：
$$
110 \quad 110 \Rightarrow 6 \quad 6 \Rightarrow 66
$$
**二进制与十六进制**:

例如，二进制 $10111011$ 转换为十六进制：
$$
1011 \quad 1011 \Rightarrow B \quad B \Rightarrow BB
$$
**八进制与十六进制**:

先将八进制转换为二进制，再将二进制转换为十六进制。



#### 二机制计算

$$
1011 + 1001 = 10010
$$





#### 真值和机器数

真值：数据的数值通常以正(+)负(-)号后跟绝对值来表示。

机器数：在计算机中正负号也需要数字化，一般用0表示正号，1表示负号。把符号数字化的数成为机器数。



#### BCD 码

在计算机中采用4位二进制码对每个十进制数位进行编码。4位二进制码有16种不同的组合，从中选出10种来表示十进制数位的0～9，用0000，0001，…，1001分别表示0，1，…，9，每个数位内部满足二进制规则，而数位之间满足十进制规则，故称这种编码为以二进制编码的十进制（binary coded decima1，简称BCD）码




#### 字符与字符串

在计算机中要对字符进行识别和处理，必须通过编码的方法，按照一定的规则将字符用一组二进制数编码表示。字符的编码方式有多种，常见的编码有ASCII码、EBCDIC码等。

**ASCII码用7位二进制表示一个字符，总共128个字符元素，数字 < 大写字母 < 小写字母，大写字母的ASCII码比对应的小写字母只少32（十进制）。**

![undefined](https://raw.githubusercontent.com/qinshuxiang/repo/main/ASCII.png)

EBCDIC码为Extended Binary Coded Decimal Interchange Code的简称，它采用8位来表示一个字符。

向量存储法：字符串存储时，字符串中的所有元素在物理上是邻接的。

串表存储法：字符串的每个字符代码后面设置一个链接字，用于指出下一个字符的存储单元的地址。



#### 校验码

##### 奇偶校验码



##### 海明校验码



##### CRC校验码



### 定点数的表示和运算

#### 定点数的表示





##### 无符号数的表示

无符号数就是指正整数，机器字长的全部位数均用来表示数值的大小，相当于数的绝对值。



##### 有符号整数的表示

根据符号位和数值位的编码方法不同，机器数分为原码、补码和反码。

- 原码：正0 负1 + 机器数 [1111 1111 , 0111 1111]
- 反码：正数为原码，负数原码取反（除符号位
- 补码：正数为原码，负数反码+1（符号不变，最后一个1右边不变，左边取反
- 移码：补码的符号位取反



#### 定点数的运算

##### 定点数的位移运算



##### 原码定点数的加减运算



##### 补码定点数的加/减运算



##### 定点数的乘/除运算



#### 溢出概念和判别方法。



### 浮点数的表示和运算

#### 浮点数的表示 IEEE 754 标准



#### 浮点数的加/减运算



### 算术逻辑单元 ALU

#### 串行加法器和并行加法器



#### 算术逻辑单元 ALU 的功能和结构



## 存储系统

### 存储器的分类

#### 1. 按存储介质分类

- **半导体存储器**：使用半导体材料（如硅）制作，包括RAM、ROM等。
- **磁表面存储器**：如硬盘、软盘等，利用磁性材料存储数据。
- **磁芯存储器**：早期的一种存储器，用磁性材料环形芯存储信息。
- **光盘存储器**：如CD、DVD等，利用激光技术读写数据。

#### 2. 按存取方式分类

- **随机存储器**：允许以任意顺序访问数据，如RAM。
- **只读存储器（ROM）**：只能读取数据，无法写入，通常用于存储固定程序。
- **串行访问存储器**：数据按固定顺序访问，如磁带存储器。

#### 3. 按在计算机中的作用分类

- **主存储器**：用于存储正在处理的数据和程序指令。主要包括RAM和ROM。**主存储器主要由存储体、控制线路、地址寄存器、数据寄存器、和地址译码电路等组成部分。**
- **辅存储器**：用于长期存储数据和文件。包括硬盘、光盘、U盘等。
- **缓存存储器**：位于CPU与主存之间，用于提高访问速度。如L1、L2和L3缓存。
- **寄存器**：位于CPU内部，用于存储指令和操作数。

#### 4. **按存储器工作方式分类**

- **读写存储器**：数据可读可写。如RAM。
- **只读存储器**：数据只能读，不能写。如ROM。

#### 5. **按存储器访问方式分类**

- **按地址访问的存储器**：数据通过地址进行访问。
- **按内容访问的存储器**：数据根据内容匹配直接访问。（相连存储器）

#### 6. **按寻址方式分类**

- **随机存储器**：可直接通过地址访问任意存储单元。
- **顺序存储器**：数据按固定顺序存取。
- **直接存储器**：数据通过硬件控制直接访问（如硬盘）。



### 存储器的层次化结构

存储器有3个重要的指标：速度、容量和每位价格，一般来说，速度越快，位价越高；容量越大，位价越低，容量大，速度就越低。



### 半导体随机存取存储器

1.SRAM 存储器 2.DRAM 存储器 3.只读存储器 4.Flash 存储器



### 主存储器与 CPU 的连接



### 双口 RAM 和多模块存储器



### 高速缓冲存储器

1.Cache 的基本工作原理 2.Cache 和主存之间的映射方式 3.Cache 中主存块的替换算法 4.Cache 写策略



高速缓冲存储器（Cache）是位于CPU和主存储器之间，规模较小，但速度很高的存储器，通常由SRAM组成。由于CPU的速度比主存快的多，所以引入Cache，用来存放一些CPU可能会用到的数据，减少了CPU的等待时间，所以Cache解决CPU和主存之间的速度匹配问题。

设置缓冲区的主要目的是缓和CPU的快速与设备的慢速之间的矛盾，若I/O花费时间比CPU处理时问短得多，则没有必要设置缓冲区。

RAID5是一种存储性能、数据安全和存储成本兼顾的存储解决方案。做RAID5阵列所有磁盘容量必须一样大，当容量不同时，会以最小的容量为准，硬盘转速最好一样，否则也会影响性能。RAID5把数据和相对应的奇偶校验信息存储到组成RAID5的各个磁盘上，其中任意￼块磁盘上都存储完整的数据，也就是说有相当于一块磁盘容量的空间用于存储奇偶校验信息，当RAID5的一个磁盘发生损坏后，不会影响数据的完整性，从而保证了数据安全。

> 用6块500G硬盘组成的RAID5阵列，最大容量大概为 500 * （6 - 1）= 2500G 约等于 2.5T

### 虚拟存储器

1.虚拟存储器的基本概念 2.页式虚拟存储器 3.段式虚拟存储器 4.段页式虚拟存储器 5.TLB(快表)

## 指令系统

### 指令格式

1.指令的基本格式 2.定长操作码指令格式 3.扩展操作码指令格式

### 指令的寻址方式

1.有效地址的概念 2.数据寻址和指令寻址 3.常见寻址方式

### CISC 和 RISC 的基本概念



## 中央处理器

### CPU 的功能和基本结构



### 指令执行过程



### 数据通路的功能和基本结构



### 控制器的功能和工作原理

1、硬布线控制器 2、微程序控制器 微程序、微指令和微命令;微指令的编码方式;微地址的形式方式。

### 指令流水线

1、指令流水线的基本概 2、指令流水线的基本实现 3、超标量和动态流水线的基本概念

## 总线

### 总线概述

1、总线的基本概念 2、总线的分类 3、总线的组成及性能指

### 总线仲裁

1、集中仲裁方式 2、分布仲裁方式

### 总线操作和定时 

1、同步定时方式 2、异步定时方式

### 总线标准



## 输入输出系统

### I/O 系统基本概念

### 外部设备 

1、输入设备：键盘、鼠标 2、输出设备：显示器、打印机 3、外存储器：硬盘存储器、磁盘阵列、光盘存储器

### I/O 接口

1、I/O 接口的功能和基本结构 2、I/O 端口及其编址

### I/O 方式

1、程序查询方式 2、程序中断方式 中断的基本概念;中断响应过程;中断处理过程;多重中断和中断屏蔽的概念。3、DMA 方式 DMA 控制器的组成，DMA 传送过程。
